// Generated by delombok at Sun Dec 01 13:28:22 MSK 2013
package spaceisnear.server.objects;

import lombok.Getter;
import spaceisnear.game.components.Component;
import spaceisnear.game.components.ComponentType;
import spaceisnear.game.components.server.BreathingComponent;
import spaceisnear.game.components.server.HealthComponent;
import spaceisnear.game.components.NameComponent;
import spaceisnear.game.components.server.PlayerControllableComponent;
import spaceisnear.game.components.PositionComponent;
import spaceisnear.game.components.inventory.InventoryComponent;
import spaceisnear.game.components.server.VariablePropertiesComponent;
import spaceisnear.game.objects.GameObjectType;
import spaceisnear.server.ServerContext;

/**
 * @author LPzhelud
 */
public class Player extends ServerGameObject {

    public int connectionID;
    @Getter private final HealthComponent healthComponent;

    public Player(ServerContext context, int connectionID) {
	super(GameObjectType.PLAYER, context);
	PositionComponent pc = new PositionComponent(24, 18);
	healthComponent = new HealthComponent();
	addComponents(pc, healthComponent, new BreathingComponent(),
		new InventoryComponent(), new PlayerControllableComponent(), new NameComponent(null),
		new VariablePropertiesComponent());
	this.connectionID = connectionID;
    }

    public String getNickname() {
	return getNameComponent().getNickname();
    }

    private NameComponent getNameComponent() {
	for (Component component : getComponents()) {
	    if (component.getType() == ComponentType.NAME) {
		return (NameComponent) component;
	    }
	}
	return null;
    }

    public InventoryComponent getInventoryComponent() {
	for (Component component : getComponents()) {
	    if (component.getType() == ComponentType.INVENTORY) {
		return (InventoryComponent) component;
	    }
	}
	return null;
    }

    public void setNickname(String nickname) {
	getNameComponent().setNickname(nickname);
    }
}
